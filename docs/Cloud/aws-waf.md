---
description: 우아콘의 AWS WAF 파트를 듣고
---

# AWS WAF
## 개념

AWS Cloud에서 제공하는 웹 어플리케이션 방화벽

보안정책에 따라 비인가 요청 탐지/차단 등 여러가지 역할을 제공하며 어플리케이션 단계의 웹 공격을 방어

## 장점

* 저렴한 보안 서비스로 다양한 보안 효과를 얻을 수 있다.
* WAFv2는 모니터링부분에서 향상된 기능을 보여준다.
* 여러 custom rule을 통해 보안설정을 할 수 있다. (그룹별, 서비스별)
  * WAFv2는 예외처리 룰도 생성 가능(WAF도 이제는 제공하지만 상세하고 가시성있게 제공하진 않음)
* 봇 성격의 트래픽 대응이 가능하다.(크롤링, 스크래퍼, DDOS 공격 등)
* 로깅데이터 활용 가능하다.

## 우아한 형제들의 WAF 이야기 요약

* WAF와 WAFv2가 있는데, WAFv2가 차츰 좋은 기능들이 추가되고 있어서 WAF -> WAFv2로 업그레이드를 할 필요가 있어졌다. 하지만 새로운 버전으로 옮기는데는 시간, 비용이 들고 오류발생확률이 생길 수 있으므로 조심했어야했다. (뭐... 어쨋든 바꿨다.)
* WAFv2를 통해 공통된 룰을 각 서비스에 적용하고 각 서비스별 새로운 룰을 추가하거나 예외처리를 했다. 예외처리를 잘 활용해서 WebACL 갯수를 50%이상 줄였다.
* 봇컨트롤을 사용해서 어뷰징 트래픽을 찾았다. 2%의 트래픽이 어뷰징 트래픽이었고 해당 트래픽을 차단했다. 하지만 나중에 잘못된 탐지로 어뷰징 트래픽이 78퍼가 나온 상황도 있었고, 예외처리를 활용해서 적용해보고 있다. 아직 신뢰성이 100퍼는 아니라는 걸 확인했다.
* 로깅할 때, 그냥 allow되는 것만 보여주기 보다 커스텀된 엔드포인트 로깅을 활용하니까 더 좋았다.
* Migration wizard를 통해서 WAF -> WAFv2 업그레이드를 진행하면 룰들을 쉽게 이전할 수 있다.

<br/>
