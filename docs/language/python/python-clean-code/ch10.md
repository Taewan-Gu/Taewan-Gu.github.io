---
sidebar_position: 10
description: 파이썬 클린코드 챕터 10 요약
---

# Ch.10 클린 아키텍처

:::note
클린 코드에서 클린 아키텍처로 살짝넘어가 보는 챕터였다. 클린 아키텍처는 클린이라는 단어를 매우 좋아하는 로버트 C. 마틴에 의해서 착안되었다.
:::

<br/>

## 아키텍처 추상화

코드 레벨에서 추상화하는 것처럼 시스템 도메인 문제에서도 추상화란 세부 구현사항을 최대한 숨기는 것이고, 그 자체로 시스템이 어떻게 되는지 설명할 수 있어야 한다. 특히, 디스크 저장 방법이나 라이브러리같은 세부사항이 아닌 시스템이 무엇을 하는가가 중요하다.

아키텍처 관점에서는 의존성 전체를 추상화해야 한다. 따라서 어플리케이션에서 `import`하여 사용하더라도 해당 로직을 몰라도 되며, 데이터베이스 등 여러 다른 시스템과 독립적으로 있어야 한다.

<br/>

## 패키지 설치

여기서는 `setuptools`를 이용하여 패키지를 설치하라고 하는데, 그냥 가상환경에 설치된 패키지를 같이 설치하는 방법이 더 나아보인다.



**`setuptools`를 통한 패키지 관리**

```python
from setuptools import find_package, setup

setup(
    name = "설치할 라이브러리 이름",
    ...
    packages=find_packages(where="..."),
    ...
)
```



**가상환경 통채로 관리**

``` bash
# 가상환경 패키지 requirements.txt에 기록
python -m venv venv
venv/bin/activate # mac 기준
pip install ... # 필요 라이브러리 설치
pip freeze > requirements.txt # 필요 라이브러리 기록

# 새 환경에서 바로 설치 가능
python -m venv venv
venv/bin/activate # mac 기준
pip install -r requirements.txt # requirements.txt 기준으로 패키지 설치
```

<br/>

## 컨테이너

도커 컨테이너를 통해 새로운 서버를 쉽게 만들 수 있다. 요즘은 다 컨테이너 형식으로 서버를 쓰거나 서버리스로 쓰기 때문에 오늘날 기준 기본적인 부분이라고 볼 수 있다. 이 책이 처음 나왔을 때는 인사이트 얻기 좋은 챕터였을듯 하다.

<br/>

## 어댑터 디자인 패턴 사용

위 추상화에 대한 부분에서 데이터베이스와 독립적으로 이루어져야 한다고 했다. 그런 것을 어댑터 디자인을 통해 잘 가꿔나갈 수 있다. 오늘 날엔 ORM이 만연해있기 때문에 DB 종속성이 쉽게 이루어진다. 하지만 ORM의 경우, 해당 라이브러리에서 추상화를 해놓았을지라도 여러 상황이 발생할 수 있다.

예를 들어, DB를 바꾸어야 되는 상황, 해당 ORM이 지원안해주거나 ORM을 바꿔야하는 상황 등에 기존코드를 변경해야 하는 상황이 생긴다. 이런 경우를 대비하여, 어댑터 디자인 패턴을 통해 ORM까지 추상화를 해놓고 쓰는 것이다. 처음 코드짜기는 힘들겠지만 후일에 DB와 ORM에 종속적이지 않은 코드를 얻게 되고 리팩토링이나 시스템 변경을 용이하게 할 수 있다.

<br/>

## 한계

어떤 아키텍처나 구현도 완벽하지 않으며, 클린 아키텍처가 모든 경우에 유용할 수 없다. 또한, 실제 업무 상엔 여러 환경이 존재하기 때문에 상당 부분 의존하게 되며, 완벽한 추상화도 있을 수 없다. 결국 소프트웨어 엔지니어링에는 한계가 있으며, 각 상황에 잘 맞춰 개발해야 한다. **실용성이 이상보다 우선이다.**

<br/>
